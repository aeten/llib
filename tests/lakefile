libs = choose(MSVC,'llib_static','llib')
function build(f)
    return c99.program{f,incdir='..',libdir='../llib',
	libs=libs,defines=choose(DEBUG,'DEBUG')
    }
end
function test(f) return build(f):run() end
if P then
  local prog = P..EXE_EXT
  if path.exists(prog) then os.remove(prog) end
  default{ build(P) }
  return
end
default {
    test('test-obj'),
    test('test-list'),
    test('test-file'),
    test('test-scan'),
    test('test-seq'),
    test('test-map'),
    test('test-str'),
    test('test-template'),
    test('test-json'),
    test('test-xml'),
    test('test-table'),
    test('test-pool'),
}

